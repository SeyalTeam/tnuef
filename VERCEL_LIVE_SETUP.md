# ðŸš€ Guide: Deploying to Vercel with Live MongoDB

You have successfully pushed your code to GitHub. Now, to make your site work on the live Vercel server with a real database, you need to configure the **Environment Variables** in Vercel.

## Step 1: Get a Live MongoDB Database

You cannot use `mongodb://127.0.0.1/...` on Vercel because that refers to the local machine. You need a cloud database. We recommend **MongoDB Atlas** (it has a free tier).

1.  **Go to [MongoDB Atlas](https://www.mongodb.com/cloud/atlas/register)** and sign up/login.
2.  **Create a Cluster** (The free "M0 Sandbox" is fine for starting).
3.  **Create a Database User**:
    - Go to "Database Access".
    - Add a new user (e.g., `admin`).
    - Create a password (make it strong, and **copy it**).
4.  **Allow Network Access**:
    - Go to "Network Access".
    - Add IP Address -> Select **"Allow Access from Anywhere"** (`0.0.0.0/0`).
    - _Note: This is required because Vercel's IP addresses change._
5.  **Get Connection String**:
    - Go to "Database" -> Click "Connect".
    - Select "Drivers" (Node.js).
    - Copy the connection string. It will look like:
      `mongodb+srv://<username>:<password>@cluster0.abcde.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0`

## Step 2: Configure Vercel Environment Variables

1.  Go to your **[Vercel Dashboard](https://vercel.com/dashboard)**.
2.  Select your project (`tnuef`).
3.  Go to **Settings** -> **Environment Variables**.
4.  Add the following variables (ensure you select **Production**, **Preview**, and **Development**):

### 1. `DATABASE_URI`

- **Value:** Paste your MongoDB Atlas connection string from Step 1.
- **Important:** Replace `<password>` with your actual password.
- _Example:_ `mongodb+srv://admin:MySecurePass123@cluster0.abcde.mongodb.net/tnuef-db?retryWrites=true&w=majority`

### 2. `PAYLOAD_SECRET`

- **Value:** Generate a random string (you can use a password generator).
- _Example:_ `b4c9a2e8f1d7g6h5j4k3l2m1n0o9p8q7`

### 3. `BLOB_READ_WRITE_TOKEN` (Already added?)

- **Value:** `vercel_blob_rw_ploAiCQOtYE9omI2_NAFK9n8n5jS9juYLSCy8eD84gtIVsL`
- _Note: This is the token for your Vercel Blob storage._

### 4. `NEXT_PUBLIC_SERVER_URL`

- **Value:** `https://tnuef.vercel.app`
- _Note: This ensures links generated by Payload point to your live site._

## Step 3: Redeploy

After saving these variables, Vercel needs to rebuild your app to pick them up.

1.  Go to the **Deployments** tab in Vercel.
2.  Click the **three dots** (...) next to your latest deployment.
3.  Select **Redeploy**.
4.  Wait for the build to finish.

## Step 4: Verify

1.  Visit `https://tnuef.vercel.app/admin`.
2.  Create your first user (this will be your admin account on the live database).
3.  Upload an image to verify Vercel Blob is working.
4.  Create a post to verify MongoDB is saving data.

ðŸŽ‰ **Your site is now live with a real database!**
